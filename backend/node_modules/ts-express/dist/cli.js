#!/usr/bin/env node
"use strict";
const program = require("commander");
const path = require("path");
const metadataGenerator_1 = require("./metadataGeneration/metadataGenerator");
const specGenerator_1 = require("./swaggerGeneration/specGenerator");
const fs = require("fs");
program.version('0.0.1');
program.command('gen <entryFile> <outPutDir>')
    .action((entryFile, outPutDir) => {
    entryFile = path.join(process.cwd(), entryFile);
    outPutDir = path.join(process.cwd(), outPutDir);
    let generator = new metadataGenerator_1.MetadataGenerator(entryFile);
    let schema = generator.Generate();
    let spegGen = new specGenerator_1.SpecGenerator(schema, { basePath: '/' });
    let swaggerJson = spegGen.GetSpec();
    fs.writeFile(path.join(outPutDir, "./swagger.json"), JSON.stringify(swaggerJson, null, 4), function (err) {
        if (!err) {
            console.log("success!");
            process.exit();
        }
        else {
            console.error(err);
            process.exit(1);
        }
    });
});
program.parse(process.argv);
//# sourceMappingURL=cli.js.map