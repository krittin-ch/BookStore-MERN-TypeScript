"use strict";
function applyMiddleware(mw) {
    return function (target, propertyKey, descriptor) {
        let reqHandler = target[propertyKey];
        if (!reqHandler.middlewares) {
            reqHandler.middlewares = [];
        }
        reqHandler.middlewares = [{ type: "classic", mw }].concat(reqHandler.middlewares);
    };
}
exports.applyMiddleware = applyMiddleware;
function applyAllMiddleware(mw) {
    return function (controller) {
        if (controller.__proto__.middlewares &&
            controller.middlewares.length === controller.__proto__.middlewares.length) {
            Object.assign(controller, {
                middlewares: [].concat(controller.middlewares).concat([[]])
            });
        }
        else {
            if (!controller.middlewares) {
                controller.middlewares = [[]];
            }
        }
        controller.middlewares[controller.middlewares.length - 1].splice(0, 0, { type: "classic", mw });
    };
}
exports.applyAllMiddleware = applyAllMiddleware;
function applyMiddlewareClass(ctor) {
    return function (target, propertyKey, descriptor) {
        let reqHandler = target[propertyKey];
        if (!reqHandler.middlewares) {
            reqHandler.middlewares = [];
        }
        reqHandler.middlewares = [{ type: "class", ctor }].concat(reqHandler.middlewares);
    };
}
exports.applyMiddlewareClass = applyMiddlewareClass;
function applyAllMiddlewareClass(ctor) {
    return function (controller) {
        if (controller.__proto__.middlewares &&
            controller.middlewares.length === controller.__proto__.middlewares.length) {
            Object.assign(controller, {
                middlewares: [].concat(controller.middlewares).concat([[]])
            });
        }
        else {
            if (!controller.middlewares) {
                controller.middlewares = [[]];
            }
        }
        controller.middlewares[controller.middlewares.length - 1].splice(0, 0, { type: "class", ctor });
    };
}
exports.applyAllMiddlewareClass = applyAllMiddlewareClass;
//# sourceMappingURL=applyMiddleware.js.map